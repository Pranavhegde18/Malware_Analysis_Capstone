import os
import shutil
from datetime import datetime, timedelta

def is_file_clutter(file_path, allowed_extensions, max_age_days):
    # Check if the file has allowed extensions
    if not any(file_path.lower().endswith(ext) for ext in allowed_extensions):
        return True

    # Check if the file is older than the maximum age (in days)
    file_modification_time = datetime.fromtimestamp(os.path.getmtime(file_path))
    max_age_date = datetime.now() - timedelta(days=max_age_days)
    if file_modification_time < max_age_date:
        return True

    return False

def clean_directory(directory, allowed_extensions, max_age_days):
    print(f"Cleaning up directory: {directory}")
    count_removed_files = 0

    for root, _, files in os.walk(directory):
        for file in files:
            file_path = os.path.join(root, file)
            if is_file_clutter(file_path, allowed_extensions, max_age_days):
                try:
                    os.remove(file_path)
                    print(f"Removed: {file_path}")
                    count_removed_files += 1
                except Exception as e:
                    print(f"Error removing: {file_path} - {e}")

    print(f"Total files removed: {count_removed_files}")

if __name__ == "__main__":
    target_directory = "/path/to/your/directory"
    allowed_extensions = [".txt", ".pdf", ".docx"]  # Customize the allowed file extensions
    max_age_days = 30  # Adjust the maximum age (in days) for files to be considered clutter

    clean_directory(target_directory, allowed_extensions, max_age_days)
