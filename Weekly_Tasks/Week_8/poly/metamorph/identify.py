import ast
import random
import string
import astor

def rename_identifiers(node):
    if isinstance(node, ast.FunctionDef):
        # Rename user-defined function names
        new_name = ''.join(random.choices(string.ascii_letters, k=6))
        node.name = new_name

    if isinstance(node, ast.Name) and not isinstance(node.ctx, ast.Load):
        # Rename user-defined variables
        new_name = ''.join(random.choices(string.ascii_letters, k=6))
        node.id = new_name

    for child in ast.iter_child_nodes(node):
        rename_identifiers(child)

def execute_modified_code(code):
    # Parse the code into an abstract syntax tree (AST)
    tree = ast.parse(code)

    # Modify identifiers
    rename_identifiers(tree)

    # Convert the modified AST back to code
    modified_code = astor.to_source(tree)

    # Execute the modified code with function definitions
    modified_code_with_functions = code + modified_code
    exec(modified_code_with_functions)

# Example usage
code = '''
def add_numbers(a, b):
    result = a + b
    return result

x = 5
y = 10
sum = add_numbers(x, y)
print(sum)
'''

execute_modified_code(code)
